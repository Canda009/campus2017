import java.io.BufferedReader;
import java.io.File;
import java.io.FileReader;
import java.io.IOException;
import java.util.ArrayList;
import java.util.Collections;
import java.util.Comparator;
import java.util.HashMap;
import java.util.List;
import java.util.Map;
import java.util.Map.Entry;

public class CalImport {
     Map<String, Integer> map=new HashMap<String, Integer>();
     //递归遍历目录，找出文件
     public void findFile(File f){
    	 if(f.isDirectory()){
    		 File[] file=f.listFiles();
    		 for(int i=0;i<file.length;i++){
    			 findFile(file[i]);
    		 }
    	 }else{
    		 processFile(f);
    	 }
     }
     
     
     //处理文件
     public void processFile(File f){
    	 try {
			FileReader fr=new FileReader(f);
		    BufferedReader br=new BufferedReader(fr);
		    String line=null;
		    while((line=br.readLine())!=null){
		    	line=line.trim();
		    	if(line.startsWith("class")||line.startsWith("public")){
		    		break;
		    	}
		    	if(line.startsWith("import")){
		    		String fName=line.substring(6,line.length()-1); //获得类名
		    		Integer c=map.get(fName);
		    		if(c==null){
		    			map.put(fName, 1);
		    		}else{
		    			map.put(fName, c+1);
		    		}
		    	}
		    }
		    		
		} catch (IOException e) {
			e.printStackTrace();
		}
     }
     
     //根据map的value降序排列,并输出前10个
     public void SortMap(){
    	 List<Entry<String, Integer>> list = new ArrayList<Map.Entry<String,Integer>>(map.entrySet());
         Collections.sort(list,new Comparator<Map.Entry<String,Integer>>() {
             //升序排序
             public int compare(Entry<String, Integer> o1,
                     Entry<String, Integer> o2) {
                 return o2.getValue().compareTo(o1.getValue());
             }
         });
         int count=0;
         for(Map.Entry<String,Integer> m:list){ 
        	if(count==10)
        		break;
             System.out.println(m.getKey()+":"+m.getValue()); 
             count++;
        } 
     }
     
     public static void main(String[] args) {
    	 CalImport c=new CalImport();
		 c.findFile(new File("E:\\LIB\\IO"));
		 c.SortMap();
	}
     
}
