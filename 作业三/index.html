<!DOCTYPE html>
<html>
<head> 
<meta charset="UTF-8">
<title>Grid Demo</title> 
<style type="text/css">
html,body,ul,li,input,table,button,div,tfoot{
margin:0px;
padding:0px;
font:12px 微软雅黑;
box-sizing:border-box;
-webkit-box-sizing:border-box;
-moz-box-sizing:border-box;
-ms-box-sizing:border-box;
-o-box-sizing:border-box;
}
input[type=button],input[type=reset],input[type=submit],button{
border-radius:3px;
-webkit-border-radius:3px;
-moz-border-radius:3px;
-ms-border-radius:3px;
-o-border-radius:3px;
line-height:2.17;
outline:none;
border:none;
color:white;
}
#container{
width:1000px;
border:1px solid #dadada;
margin-left:auto;
margin-right:auto; 
margin-top:20px;
padding-top:10px;
}
@media screen and (min-width:1000px){
#container{
width:1000px;
}
}
@media screen and (min-width:800px) and (max-width:999px){
#container{
width:100%;
}
}
@media screen and (max-width:799px){
#container{
width:800px;
}
}
#nav{
margin-left:1%;
margin-right:1%;
height:3.2%;
list-style:none;
position:relative;
background-color:#fbfcfd;
border-bottom:1px solid #dadada; 
}
#nav li{
height:93.75%;
position:absolute;
bottom:-1px;
margin-right:6px;
background-color:#f1f1f1;
line-height:2.2;
padding:0px 19px;
border-radius:2px 2px 0px 0px;
-webkit-border-radius:2px 2px 0px 0px;
-moz-border-radius:2px 2px 0px 0px;
-ms-border-radius:2px 2px 0px 0px;
-o-border-radius:2px 2px 0px 0px;
}
#three{
background-color:white!important;
border:1px solid #dadada;
border-bottom:none;
right:14px;
}
#two{
border:1px solid #dadada;
right:108px;
}
#one{
border:1px solid #dadada;
right:198px;
}
form{
padding:10px 20px;
}
#all,#search,#reset,.changeMes{
padding:0px 20px;
background-color:#3775c0;
}
#reset{
background-color:#ff0000;
}
#message1,#message2{
color:#3775c0;
padding:0px 20px;
}
#message2{
margin-right:20px;
}
form input[type=text]{
line-height:2.17;
border:1px solid #cccccc;
height:26.04px;
}
#tab{
width:96.1%;
margin:10px auto;
border:1px solid #e5e5e5;
border-collapse:collapse;
}
#footer{
background-color:#f8f8f8;
line-height:2.17;
font-size:12px;
}
#footer .page{
color:#0069ca;
background-color:white;
border:1px solid #e5e5e5;
border-radius:0px;
-webkit-border-radius:0px;
-moz-border-radius:0px;
-ms-border-radius:0px;
-o-border-radius:0px;
padding:0px 11px;
}
#current{
color:#ff0000;
padding:0px 11px;
}
#goto{
border:1px solid #cccccc;
line-height:2.17;
margin:0px 7px;
width:40px;
}
#sure{
border:1px solid #cccccc;
border-radius:3px;
-webkit-border-radius:3px;
-moz-border-radius:3px;
-ms-border-radius:3px;
-o-border-radius:3px;
padding:0px 11px;
color:black;
background-color:#f8f8f8;
}
#footerContent{
float:right;
margin:5px 10px;
}
thead,tbody{
line-height:2.75;
}
th{
font-weight:normal;
text-align:left;
}
thead tr{
background-color:#f8f8f8;
}
tbody tr{
border-bottom:1px solid #f3f3f3;
}
tbody tr:last-child{
border-bottom:2px solid #e5e5e5;
}
</style>
</head> 
<body>
<div id="container"><ul id="nav"><li id="one">E币兑换</li><li id="two">E币明细</li><li id="three">兑换记录</li></ul>
<form>
<input type="button" id="all" value="全部"/>
<span id="message1">成功</span>
<span id="message2">失败</span>
<label>选择日期：</label><input type="text" name="start" id="start"/><label>至</label><input type="text" name="end" id="end"/>
<input type="button" id="search" value="搜索"/>
<input type="reset" id="reset" value="重置"/>
</form>
<table id="tab">
<thead>
<tr>
<th>时间</th>
<th>商品名称</th>
<th>数量</th>
<th>E币</th>
<th>状态</th>
<th>信息</th>
<th>兑换信息</th>
<th>确认</th>
</tr>
</thead>
<tbody>
</tbody>
<tfoot>
<tr>
<td colspan="8" id="footer">
<div id="footerContent">
<button class="page" id="firstPage">首页</button><span id="current">1</span><button class="page" id="lastPage">末页</button>共<span id="allText">1</span>页，跳转到<input type="text" id="goto"/><button id="sure">确定</button></tr>
</div>
</td>
</tfoot>
</table>
</body>
<script>
(function(window){
/*用来记录当前页码和查询总页码*/
var global={
currentPage:-1,
allPage:0,
items:[]
};
var container=document.getElementById("container");
var width=(window.getComputedStyle&&window.getComputedStyle(container,"").width)||container.currentStyle.width;
container.style.height=parseFloat(width)*1.025+"px";
var tbody=document.getElementsByTagName("tbody")[0];
for(var i=0;i<12;i++){
createItem("2014-10-28<br/>15:37:21","手机50元话费充值","1","190","兑换失败","充值失败，E币已退回。");
}
/*创建某一条记录*/
function createItem(time,name,count,eMoney,state,message){
var pos=tbody.rows.length;
var row=tbody.insertRow(pos);
for(var i=0;i<8;i++){
row.insertCell(i);
}
var cells=row.cells;
var timeCell=cells[0];
timeCell.innerHTML=time;
var nameCell=cells[1];
nameCell.appendChild(document.createTextNode(name));
var nameCell=cells[2];
nameCell.appendChild(document.createTextNode(count));
var nameCell=cells[3];
nameCell.appendChild(document.createTextNode(eMoney));
var nameCell=cells[4];
nameCell.appendChild(document.createTextNode(state));
var nameCell=cells[5];
nameCell.appendChild(document.createTextNode(message));
var nameCell=cells[6];
var changeMes=document.createElement("button");
changeMes.className="changeMes";
changeMes.appendChild(document.createTextNode("兑换信息"));
nameCell.appendChild(changeMes);
}
/*创建所有记录*/
function createItems(page){
//创建记录前先清除所有的记录
document.getElementsByTagName("tbody")[0].innerHTML="";
var items=global.items;
var start=13*page;
var end;
if(page+1==global.allPage){
end=global.items.length;
}else{
end=start*(page+1);
}
for(var index=start;index<end;index++){
var item=items[index];
createItem(item.time,item.name,item.count,item.eMoney,item.state,item.message);
}
}
/*创建XMLHttpRequest对象*/
function createXMLHttpRequest() {
        var xmlHttp = null;
        try {
            xmlHttp = new XMLHttpRequest();
        } catch (e) {
            var MSXML = ['MSXML2.XMLHTTP.6.0', 'MSXML2.XMLHTTP.5.0',
                'MSXML2.XMLHTTP.4.0', 'MSXML2.XMLHTTP.3.0',
                'MSXML2.XMLHTTP', 'Microsoft.XMLHTTP'];
            for (var i = 0; i < MSXML.length; i++) {
                try {
                    xmlHttp = new ActiveXObject(MSXML[i]);
                    break;
                } catch (e) {

                }
            }
        }
        return xmlHttp;
    }
/*向服务器端要从start */
function gainItems(startTime,endTime){
 var xhr = createXMLHttpRequest();
       xhr.onreadystatechange = function () {
            if (xhr.readyState == 4 && xhr.status == 200) {
                var obj = eval("(" + xhr.responseText + ")");
				var items=[];
				for(var i in obj){
				items.push[obj[i]];
				}
				global.allPage=items.length%13==0? items.length/13:parseInt(items.length/13)+1;
				document.getElementById("allText").innerHTML=global.allPage;
				global.currentPage=0;
				global.items=items;
                createItems(0);
            }
        }
        xhr.open("GET", "queryItems.do?startTime=" + startTime + "&endTime=" + endTime, true);
        xhr.send(null);
}
/*为按钮添加事件*/
/*为搜索按钮添加事件*/
document.getElementById("search").onclick=function(){
var startTime=document.getElementById("start").value.trim();
var endTime=document.getElementById("end").value.trim();
if(startTime==""||endTime==""){
alert("Search Time can't be empty");
}else{
gainItems(startTime,endTime);
}
};
//为第一页添加事件
document.getElementById("firstPage").onclick=function(){
var startTime=document.getElementById("start").value.trim();
if(global.currentPage!=0){
createItems(0);
}
};
//为最后一页添加事件
document.getElementById("lastPage").onclick=function(){
var startTime=document.getElementById("start").value.trim();
if(global.currentPage!=global.allPage-1){
createItems(global.allPage-1);
}
};
//为确定按钮添加事件
document.getElementById("sure").onclick=function(){
var pageStr=document.getElementById("goto").value.trim();
var page;
if(pageStr==""){
alert("Current page can't be empty!");
}else{
page=Number(pageStr);
if(isNaN(page)){
alert("Page should be a number!");
}else if(global.currentPage!=(page-1)){
global.currentPage=page-1;
createItems(page-1);
}
}
};
})(window);
</script>
</html>